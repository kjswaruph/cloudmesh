server:
  port: 8080 # Gateway Port (User accesses this)

spring:
  data:
    redis:
      host: ${SPRING_DATA_REDIS_HOST:redis}
      port: ${SPRING_DATA_REDIS_PORT:6379}
  application:
    name: cloudmesh-gateway
  cloud:
    gateway:
      routes:
        # Auth Controller
        - id: auth-service
          uri: http://backend:8081
          predicates:
            - Path=/auth/**

        # Project Controller
        - id: project-service
          uri: http://backend:8081
          predicates:
            - Path=/api/projects/**

        # Cloud Credential Controller
        - id: credential-service
          uri: http://backend:8081
          predicates:
            - Path=/api/credentials/**

        # Cost Controller
        - id: cost-service
          uri: http://backend:8081
          predicates:
            - Path=/api/costs/**

        # User Controller
        - id: user-service
          uri: http://backend:8081
          predicates:
            - Path=/api/users/**

        # Hello Controller
        - id: hello-service
          uri: http://backend:8081
          predicates:
            - Path=/hello

        # Home Controller (Redirects)
        - id: home-redirect
          uri: http://backend:8081
          predicates:
            - Path=/,/login,/signup

        # OAuth Endpoints
        - id: oauth2-login
          uri: http://backend:8081
          predicates:
            - Path=/oauth2/**

        - id: oauth2-redirect
          uri: http://backend:8081
          predicates:
            - Path=/login/oauth2/**

        # Catch-all for debugging
        - id: catch-all
          uri: http://backend:8081
          predicates:
            - Path=/**
        # Optional: Proxy root or other static resources if backend serves them, but Frontend connects to Gateway API.

jwt:
  secret: ${JWT_SECRET}

management:
  endpoints:
    web:
      exposure:
        include: health,gateway
  endpoint:
    health:
      show-details: always

logging:
  level:
    org.springframework.cloud.gateway: DEBUG
    org.springframework.data.redis: INFO